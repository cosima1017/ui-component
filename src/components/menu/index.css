@reference "tailwindcss";

@layer components {
  /* 下拉菜单容器 */
  .dropdown-menu-container {
    @apply relative inline-block;
  }

  /* 触发器样式 */
  .dropdown-trigger {
    @apply cursor-pointer select-none;
  }

  /* 下拉菜单主体 */
  .dropdown-menu {
    @apply animate-[dropdown-fade-in_0.2s_ease-out] shadow-[0_6px_16px_0_rgba(0,0,0,0.08),0_3px_6px_-4px_rgba(0,0,0,0.12),0_9px_28px_8px_rgba(0,0,0,0.05)] mt-0.5 border border-solid rounded-md border-[#d9d9d9] bg-[#fff] px-0 py-1 min-w-30 max-w-75;
  }

  /* 菜单项基础样式 */
  .dropdown-menu-item {
    @apply relative animate-[all_0.2s_ease] cursor-pointer;
  }

  .dropdown-menu-item:hover:not(.disabled) {
    @apply bg-[#f5f5f5];
  }

  .dropdown-menu-item.disabled {
    @apply cursor-not-allowed text-[#bfbfbf];
  }

  .dropdown-menu-item.disabled:hover {
    @apply bg-transparent;
  }

  /* 菜单项内容 */
  .menu-item-content {
    @apply flex items-center px-4 py-1.25 text-[rgba(0,0,0,0.88)] text-[14px] leading-[22px] whitespace-nowrap;
  }

  /* 菜单项图标 */
  .menu-item-icon {
    @apply flex items-center mr-2 text-[14px];
  }

  /* 菜单项标签 */
  .menu-item-label {
    @apply flex-1 truncate;
  }

  /* 有子菜单的箭头 */
  .menu-item-arrow {
    @apply rotate-0 transition-transform duration-200 ease-in-out ml-2 text-[#8c8c8c] text-[10px];
  }

  .menu-item-arrow.open {
    @apply rotate-90;
  }

  /* 子菜单样式 */
  .submenu {
    @apply absolute top-0 left-full animate-[submenu-fade-in_0.2s_ease-out] ml-1
        shadow-[0_6px_16px_0_rgba(0,0,0,0.08),0_3px_6px_-4px_rgba(0,0,0,0.12),0_9px_28px_8px_rgba(0,0,0,0.05)]
        border border-solid border-[#d9d9d9] rounded-md bg-[#fff]
        py-1 px-0 min-w-30 max-w-75;
  }

  /* 分割线样式 */
  .dropdown-menu-item.divider {
    @apply cursor-default my-1 bg-[#f0f0f0] h-px hover:bg-[#f0f0f0];
  }

  /* .dropdown-menu-item.divider:hover {
  @apply bg-[#f0f0f0];
} */

  /* 动画效果 */
  @keyframes dropdown-fade-in {
    from {
      transform: translateY(-8px) scale(0.95);
      opacity: 0;
    }

    to {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
  }

  @keyframes submenu-fade-in {
    from {
      transform: translateX(-8px) scale(0.95);
      opacity: 0;
    }

    to {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }

  /* 响应式设计 */
  @media (max-width <= 768px) {
    .dropdown-menu {
      @apply min-w-[100px] max-w-[250px];
    }

    .submenu {
      @apply min-w-[100px] max-w-[250px];
    }

    .menu-item-content {
      @apply px-3 py-2 text-[16px];
    }
  }

  /* 深色主题支持 */
  @media (prefers-color-scheme: dark) {
    .dropdown-menu,
    .submenu {
      @apply border-[#434343] bg-[#1f1f1f] text-[rgba(255,255,255,0.88)];
    }

    .dropdown-menu-item:hover:not(.disabled) {
      @apply bg-[#262626];
    }

    .dropdown-menu-item.disabled {
      @apply text-[#595959];
    }

    .menu-item-content {
      @apply text-[rgba(255,255,255,0.88)];
    }

    .menu-item-arrow {
      @apply text-[#8c8c8c];
    }

    .dropdown-menu-item.divider {
      @apply bg-[#434343];
    }

    .dropdown-menu-item.divider:hover {
      @apply bg-[#434343];
    }
  }

  /* 焦点状态 */
  .dropdown-menu-item:focus {
    @apply outline-2 outline-[#1890ff] outline-solid -outline-offset-2;
  }

  /* 选中状态 */
  .dropdown-menu-item.selected {
    @apply bg-[#e6f7ff] text-[#1890ff];
  }

  .dropdown-menu-item.selected:hover {
    @apply bg-[#bae7ff];
  }

  /* 危险操作样式 */
  .dropdown-menu-item.danger {
    @apply text-[#ff4d4f];
  }

  .dropdown-menu-item.danger:hover:not(.disabled) {
    @apply bg-[#fff2f0] text-[#ff4d4f];
  }
}
